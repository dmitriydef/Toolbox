(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["5212cf96"],{"4d2f":function(e,t,i){},"504c":function(e,t,i){var s=i("0d58"),a=i("6821"),c=i("52a7").f;e.exports=function(e){return function(t){var i,n=a(t),o=s(n),l=o.length,r=0,m=[];while(l>r)c.call(n,i=o[r++])&&m.push(e?[i,n[i]]:n[i]);return m}}},8615:function(e,t,i){var s=i("5ca1"),a=i("504c")(!1);s(s.S,"Object",{values:function(e){return a(e)}})},"8e5e":function(e,t,i){"use strict";var s=i("4d2f"),a=i.n(s);a.a},c5ce:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",[i("q-toolbar",{staticClass:"justify-between q-py-none",attrs:{color:"dark"}},[i("div",{staticStyle:{"max-width":"55%"}},[i("q-item",{staticClass:"no-padding q-mr-sm",staticStyle:{display:"inline-flex","max-width":"calc(50% - 8px)"},style:{cursor:e.isNeedSelect?"":"default!important"}},[e.$q.platform.is.desktop?i("q-item-side",{staticStyle:{"min-width":"25px"}},[i("q-item-tile",[i("q-icon",{attrs:{color:"white",name:"mdi-calculator-variant",size:"25px"}})],1)],1):e._e(),i("q-item-main",[e.active?i("q-item-tile",{staticClass:"ellipsis overflow-hidden",style:{maxWidth:"140px"},attrs:{label:""}},[e._v(e._s(e.selectedItem.name||"<noname>"))]):i("q-item-tile",{staticClass:"ellipsis overflow-hidden",style:{maxWidth:"140px"},attrs:{label:""}},[e._v("Select calc")])],1),i("q-item-side",{staticClass:"text-right"},[e.selectedItem.id?i("q-item-tile",{staticClass:"text-center",staticStyle:{display:"inline-block"},attrs:{stamp:"",color:"white"}},[e.selectedItem.deleted?i("div",{staticClass:"cheap-modifier"},[i("small",[e._v("DELETED")])]):e._e(),e._v("#"+e._s(e.selectedItem.id.toString()))]):e._e(),e.isNeedSelect?i("q-item-tile",{staticStyle:{display:"inline-block"},attrs:{stamp:"",color:"white",size:"2rem",icon:"mdi-menu-down"}}):e._e()],1),e.isNeedSelect?i("q-popover",{ref:"popoverActive",attrs:{fit:""}},[i("q-input",{staticClass:"q-ma-xs q-pa-xs items__filter",attrs:{color:"dark",clearable:"",placeholder:"Filter","hide-underline":""},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),i("q-list",{staticClass:"scroll",attrs:{link:"",separator:""}},[e.filteredItems.length?i("VirtualList",{attrs:{size:40,remain:e.filteredItems.length+1>6?6:e.filteredItems.length+1}},[i("q-item",{staticClass:"cursor-pointer text-grey",attrs:{highlight:""},nativeOn:{click:function(t){e.active=null,e.$refs.popoverActive.hide(),e.$emit("view-data-hide")}}},[i("q-item-main",[i("q-item-tile",{staticClass:"ellipsis overflow-hidden",attrs:{label:""}},[e._v("Select calc...")])],1),i("q-item-side",{staticClass:"text-right"},[i("q-icon",{attrs:{name:"mdi-close"}})],1)],1),e._l(e.filteredItems,function(t,s){return i("q-item",{key:s,staticClass:"cursor-pointer",class:{"text-grey-8":t.deleted},attrs:{highlight:""},nativeOn:{click:function(i){e.active=t.id,e.$refs.popoverActive.hide(),e.$emit("view-data-hide")}}},[i("q-item-main",[i("q-item-tile",{staticClass:"ellipsis overflow-hidden",attrs:{label:""}},[e._v(e._s(t.name||"<noname>"))])],1),i("q-item-side",{staticClass:"text-center"},[t.deleted?i("q-item-tile",{staticClass:"cheap-modifier"},[i("small",[e._v("DELETED")])]):e._e(),t.id?i("q-item-tile",[i("small",[e._v("#"+e._s(t.id.toString()))])]):e._e()],1)],1)})],2):i("div",{staticClass:"text-center q-ma-md"},[e._v("\n              No calcs\n            ")])],1)],1):e._e()],1),i("q-item",{staticClass:"no-padding",staticStyle:{display:"inline-flex","max-width":"50%"},style:{cursor:e.isNeedSelect?"":"default!important"}},[e.$q.platform.is.desktop?i("q-item-side",{staticStyle:{"min-width":"25px"}},[i("q-item-tile",[i("q-icon",{attrs:{color:"white",name:"mdi-developer-board",size:"25px"}})],1)],1):e._e(),i("q-item-main",[e.activeDeviceId?[i("q-item-tile",{staticClass:"ellipsis overflow-hidden",style:{maxWidth:"140px"},attrs:{label:""}},[e._v(e._s(e.selectedDevice.name||"#"+e.selectedDevice.id))]),e.selectedDevice.ident?i("q-item-tile",{staticStyle:{"font-size":"0.8rem"},attrs:{sublabel:""}},[e._v(e._s(e.selectedDevice.ident))]):e._e()]:i("q-item-tile",{staticClass:"ellipsis overflow-hidden",style:{maxWidth:"140px"},attrs:{label:""}},[e._v("Select device")])],2),i("q-item-side",{staticClass:"text-right"},[i("q-item-tile",{staticClass:"text-center",staticStyle:{display:"inline-block"},attrs:{stamp:"",color:"white"}},[e.selectedDevice.deleted?i("div",{staticClass:"cheap-modifier"},[i("small",[e._v("DELETED")])]):e._e(),e._v("#"+e._s(e.selectedDevice.id))]),e.isNeedSelect?i("q-item-tile",{staticStyle:{display:"inline-block"},attrs:{stamp:"",color:"white",size:"2rem",icon:"mdi-menu-down"}}):e._e()],1),e.isNeedSelect?i("q-popover",{ref:"popoverActive",attrs:{fit:""}},[i("q-input",{staticClass:"q-ma-xs q-pa-xs items__filter",attrs:{color:"dark",clearable:"",placeholder:"Filter","hide-underline":""},model:{value:e.deviceFilter,callback:function(t){e.deviceFilter=t},expression:"deviceFilter"}}),i("q-list",{staticClass:"scroll",attrs:{link:"",separator:""}},[e.filteredDevices.length?i("VirtualList",{attrs:{size:55,remain:e.filteredDevices.length+1>6?6:e.filteredDevices.length+1}},[i("q-item",{staticClass:"cursor-pointer text-grey",attrs:{highlight:""},nativeOn:{click:function(t){e.activeDeviceId=null,e.$refs.popoverActive.hide(),e.$emit("view-data-hide")}}},[i("q-item-main",[i("q-item-tile",{staticClass:"ellipsis overflow-hidden",staticStyle:{"line-height":"39px"},style:{maxWidth:e.$q.platform.is.mobile?"":"140px"},attrs:{label:""}},[e._v("Select device...")])],1),i("q-item-side",{staticClass:"text-right"},[i("q-icon",{attrs:{name:"mdi-close"}})],1)],1),e._l(e.filteredDevices,function(t,s){return i("q-item",{key:s,staticClass:"cursor-pointer",class:{"text-grey-8":t.deleted},attrs:{highlight:""},nativeOn:{click:function(i){e.activeDeviceId=t.id,e.$refs.popoverActive.hide(),e.$emit("view-data-hide")}}},[i("q-item-main",[i("q-item-tile",{staticClass:"ellipsis overflow-hidden",style:{maxWidth:e.$q.platform.is.mobile?"":"140px"},attrs:{label:""}},[e._v(e._s(t.name||"#"+t.id))]),i("q-item-tile",{attrs:{sublabel:""}},[i("small",[e._v(e._s(t.ident||"<no ident>"))])])],1),i("q-item-side",{staticClass:"text-center"},[t.deleted?i("q-item-tile",{staticClass:"cheap-modifier"},[i("small",[e._v("DELETED")])]):e._e(),i("q-item-tile",[i("small",[e._v("#"+e._s(t.id))])])],1)],1)})],2):i("div",{staticClass:"text-center q-ma-md"},[e._v("\n              No devices\n            ")])],1),e.needShowGetDeletedAction&&1===e.tokenType?i("q-btn",{staticClass:"deleted-action",attrs:{icon:"mdi-download"},on:{click:e.getDeletedHandler}},[e._v("see deleted")]):e._e()],1):e._e()],1)],1),i("div",[e.selectedItem.deleted?e._e():i("q-btn",{staticClass:"on-left",attrs:{title:"Mode (Real-time/History)",size:"sm",flat:"",color:"white",icon:e.modeModel?"playlist_play":"history",rounded:e.$q.platform.is.mobile},on:{click:function(t){e.modeModel=!e.modeModel}}},[e._v("\n        "+e._s(e.$q.platform.is.mobile?"":e.modeModel?"Real-time":"History")+"\n        "),e.newMessagesCount?i("q-chip",{staticClass:"cursor-pointer q-ml-sm",attrs:{small:"",square:"",color:"red"}},[e._v(e._s(e.newMessagesCount))]):e._e()],1),e.selectedItem.deleted?e._e():i("q-btn-toggle",{staticClass:"q-ml-sm gt-xs",attrs:{dense:"",color:"grey-8","toggle-color":"white","toggle-text-color":"dark",size:"sm",options:[{label:"logs",value:100},{label:"both",value:50},{label:"intervals",value:0}]},model:{value:e.ratio,callback:function(t){e.ratio=t},expression:"ratio"}}),i("q-btn",{staticClass:"lt-sm",attrs:{dense:"",size:"sm"}},[e._v("\n        "+e._s(50===e.ratio?"both":0===e.ratio?"messages":"logs")+"\n        "),i("q-popover",{staticStyle:{"background-color":"transparent"}},[e.selectedItem.deleted?e._e():i("q-btn-toggle",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",color:"grey-8","toggle-color":"white","toggle-text-color":"dark",size:"sm",options:[{label:"logs",value:100},{label:"both",value:50},{label:"intervals",value:0}]},model:{value:e.ratio,callback:function(t){e.ratio=t},expression:"ratio"}})],1)],1)],1),i("div",[e.modeModel&&!e.isEmptyMessages?i("q-icon",{staticClass:"on-left cursor-pointer pull-right",attrs:{title:"Clear all panes",size:"1.5rem",color:"white",name:"mdi-playlist-remove"},nativeOn:{click:function(t){return e.clearHandler(t)}}}):e._e()],1)]),+e.size[0]&&e.active?i("logs",{ref:"logs",style:{minHeight:"calc("+e.size[0]+"vh - "+(+e.size[1]?e.isVisibleToolbar?"50px":"25px":e.isVisibleToolbar?"100px":"50px")+")",position:"relative"},attrs:{mode:e.mode,item:e.selectedItem,limit:e.limit,isEnabled:!!+e.size[0],originPattern:"gw/calcs/:id",config:e.config.logs},on:{"view-log-message":e.viewLogMessagesHandler}}):+e.size[0]&&!e.active?i("div",{staticClass:"text-grey text-center q-mt-lg",staticStyle:{"font-size":"2.5rem"},style:{minHeight:"calc("+e.size[0]+"vh - "+(+e.size[1]?e.isVisibleToolbar?"50px":"25px":e.isVisibleToolbar?"100px":"50px")+")",position:"relative"}},[e._v("\n    Select a calc\n  ")]):e._e(),+e.size[1]&&e.active&&e.activeDeviceId?i("messages",{ref:"messages",style:{minHeight:"calc("+e.size[1]+"vh - "+(+e.size[0]?e.isVisibleToolbar?"50px":"25px":e.isVisibleToolbar?"100px":"50px")+")",position:"relative"},attrs:{mode:e.mode,activeId:e.active,item:e.selectedItem,activeDeviceId:e.activeDeviceId,isEnabled:!!+e.size[1],limit:0,config:e.config.messages},on:{"view-data":e.viewDataHandler}}):+e.size[1]&&e.active&&!e.activeDeviceId?i("div",{staticClass:"text-grey text-center q-pt-lg",staticStyle:{"font-size":"2.5rem"},style:{minHeight:"calc("+e.size[1]+"vh - "+(+e.size[0]?e.isVisibleToolbar?"50px":"25px":e.isVisibleToolbar?"100px":"50px")+")",position:"relative"}},[e._v("\n    Select device\n  ")]):e._e()],1)},a=[],c=(i("28a5"),i("55dd"),i("7f7f"),i("c5f6"),i("6762"),i("2fdb"),i("3156")),n=i.n(c),o=i("2ce0"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("virtual-scroll-list",{ref:"scrollList",attrs:{cols:e.cols,actions:e.actions,items:e.messages,dateRange:[e.begin,e.end],viewConfig:e.viewConfig,colsConfigurator:"toolbar",mode:0,i18n:e.i18n,filter:e.filter,theme:e.theme,title:"Intervals"},on:{"change:filter":e.filterChangeHandler,"change:date-range":e.dateRangeChangeHandler,"update:cols":e.updateColsHandler},scopedSlots:e._u([{key:"items",fn:function(t){var s=t.item,a=t.index,c=t.actions,n=t.cols,o=t.etcVisible,l=t.actionsVisible,r=t.itemHeight,m=t.rowWidth;return i("messages-list-item",{key:""+JSON.stringify(s)+a,attrs:{item:s,index:a,actions:c,cols:n,itemHeight:r,rowWidth:m,etcVisible:o,actionsVisible:l,selected:e.selected.includes(a)},on:{action:e.actionHandler,"item-click":e.viewMessagesHandler}})}}])})],1)},r=[],m=(i("96cf"),i("c973")),d=i.n(m),u=(i("ac6a"),i("cadf"),i("8615"),i("de45")),h=i("2b0e"),f=i("f490"),v=i("ef95"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:{height:e.itemHeight+"px",width:e.rowWidth+"px"}},[e.item["__connectionStatus"]||e.item["x-flespi-filter-prev"]||e.item["x-flespi-filter-next"]?e.item["x-flespi-filter-prev"]||e.item["x-flespi-filter-next"]?i("div",{style:{height:e.itemHeight+"px",width:e.rowWidth+"px",color:"#000",fontWeight:"bold",backgroundColor:e.item["x-flespi-filter-prev"]?"#819002":"#ccb300",overflow:"hidden"}},[i("span",{staticClass:"uppercase text-white",staticStyle:{padding:"0 5px"}},[e._v(e._s(e.item["x-flespi-filter-next"]?'Next results will be filtered by: "'+e.item["x-flespi-filter-next"]+'"':'Filter removed: "'+e.item["x-flespi-filter-prev"]+'"'))])]):i("div",{style:{height:e.itemHeight+"px",width:e.rowWidth+"px",border:"solid 1px #000",color:"#000",fontWeight:"bold",backgroundColor:"offline"===e.item.__connectionStatus?"#ff0":"#0f0",backgroundImage:"url(./statics/police.png)",overflow:"hidden",opacity:".7"},attrs:{title:e.date.formatDate(1e3*e.item.timestamp,"DD/MM/YYYY HH:mm:ss")}},e._l(Array(10),function(t){return i("span",{key:t,staticClass:"uppercase",staticStyle:{padding:"0 5px","margin-left":"150px"},style:{backgroundColor:"offline"===e.item.__connectionStatus?"#ff0":"#0f0"}},[e._v("\n    "+e._s(e.item["__connectionStatus"])+"\n  ")])})):i("div",{staticClass:"cursor-pointer",class:[e.item.__status?"missed-items":""],style:{height:e.itemHeight+"px",width:e.rowWidth+"px",backgroundColor:e.selected?"rgba(255,255,255,0.7)":"",color:e.selected?"#333":"",borderBottom:e.item.delimiter?"solid 1px #f40":""},on:{click:function(t){e.itemClickHandler(e.index,e.clearItem)}}},[e.actionsVisible?i("span",{staticClass:"list__item item_actions"},e._l(e.actions,function(t,s){return i("q-icon",{key:s,staticClass:"cursor-pointer on-left",class:t.classes,attrs:{name:t.icon},nativeOn:{click:function(i){i.stopPropagation(),e.clickHandler(e.index,t.type,e.item)}}},[i("q-tooltip",[e._v(e._s(t.label))])],1)})):e._e(),e._l(e.cols,function(t,s){var a;return i("span",{key:t.name+s,staticClass:"list__item",class:(a={},a["item_"+s]=!0,a),style:{color:e.item["x-flespi-filter-fields"]&&e.item["x-flespi-filter-fields"].includes(t.name)?"#4caf50":""},attrs:{title:e.values[t.name].value}},[e._v("\n    "+e._s(e.values[t.name].value)+"\n  ")])}),e.etcVisible?i("span",{staticClass:"list__item item_etc"},[e._v("\n    "+e._s(e.values.etc.value||"*Empty*")+"\n  ")]):e._e()],2)])},g=[],x=(i("4917"),i("9523")),b=i.n(x),_=i("7037"),$=i.n(_),y=(i("456d"),{props:["item","index","actions","cols","itemHeight","etcVisible","rowWidth","actionsVisible","selected"],data:function(){return{date:f["d"]}},computed:{values:function(){var e=this,t={};return t=this.cols.length?this.cols.reduce(function(e,t,i,s){return e[t.name]={value:null},t.type&&(e[t.name].type=t.type),i===s.length-1&&(e.etc={value:""}),e},{}):{etc:{value:""}},Object.keys(this.item).forEach(function(i){if(-1!==i.indexOf("#")){var s=i.split("#"),a=s[0],c=s[1];if(t[a]){if(t[a].value){if("object"!==$()(t[a].value)){var n=t[a].value;t[a].value=b()({},c-1,n)}}else t[a].value={};t[a].value[c]=JSON.stringify(e.item[i])}else t.etc.value+="".concat(i,": ").concat(JSON.stringify(e.item[i]),"; ")}else if(t[i]){var o=e.item[i];(i.match(/timestamp$/)||"begin"===i||"end"===i)&&(o=f["d"].formatDate(1e3*o,"DD/MM/YYYY HH:mm:ss")),-1!==i.indexOf("image.bin.")&&(o="<binary image>"),t[i].value="string"===typeof o?o:JSON.stringify(o)}else-1!==i.indexOf("image.bin.")?t.etc.value+="".concat(i,": <binary image>"):t.etc.value+="".concat(i,": ").concat(JSON.stringify(e.item[i]),"; ")}),Object.keys(t).forEach(function(e){if("object"===$()(t[e].value)&&t[e].value)if(t[e].value instanceof Array){var i=t[e].value.reduce(function(e,t,i,s){return e+=t,i!==s.length-1&&(e+=", "),e},"");t[e].value=i}else if(t[e].value instanceof Object){var s=Object.keys(t[e].value).reduce(function(i,s,a,c){return i+="".concat(s,": ").concat(t[e].value[s]),a!==c.length-1&&(i+=", "),i},"");t[e].value=s}}),t},clearItem:function(){var e=this;return Object.keys(this.item).reduce(function(t,i){return t[i]=e.item[i],t},{})}},methods:{clickHandler:function(e,t,i){this.$emit("action",{index:e,type:t,content:i})},itemClickHandler:function(e,t){this.$emit("item-click",{index:e,content:t})}}}),N=y,w=(i("e439"),i("2877")),q=Object(w["a"])(N,p,g,!1,null,null,null);q.options.__file="MessagesListItem.vue";var C=q.exports,k={props:["item","activeId","activeDeviceId","limit","config"],data:function(){return{theme:this.config.theme,i18n:{},viewConfig:this.config.viewConfig,actions:this.config.actions,moduleName:this.config.vuexModuleName}},computed:{messages:{get:function(){var e=this.$store.state[this.moduleName].messages;return e=Object.values(e),this.setTranslate(e),e.sort(function(e,t){return e.begin-t.begin}),e},set:function(e){this.$store.commit("".concat(this.moduleName,"/setMessages"),e)}},active:{get:function(){return this.$store.state[this.moduleName].active},set:function(){var e=d()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("".concat(this.moduleName,"/unsubscribePooling"));case 2:return this.$store.commit("".concat(this.moduleName,"/setActive"),t),this.$store.commit("".concat(this.moduleName,"/clearMessages")),this.$store.commit("".concat(this.moduleName,"/setCols"),this.item.counters),e.next=7,this.$store.dispatch("".concat(this.moduleName,"/initTime"));case 7:return e.next=9,this.$store.dispatch("".concat(this.moduleName,"/get"));case 9:this.$store.dispatch("".concat(this.moduleName,"/pollingGet"));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},activeDevice:{get:function(){return this.$store.state[this.moduleName].activeDevice},set:function(){var e=d()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("".concat(this.moduleName,"/unsubscribePooling"));case 2:return this.$store.commit("".concat(this.moduleName,"/setActiveDevice"),t),this.$store.commit("".concat(this.moduleName,"/clearMessages")),this.$store.commit("".concat(this.moduleName,"/setCols"),this.item.counters),e.next=7,this.$store.dispatch("".concat(this.moduleName,"/initTime"));case 7:return e.next=9,this.$store.dispatch("".concat(this.moduleName,"/get"));case 9:this.$store.dispatch("".concat(this.moduleName,"/pollingGet"));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},cols:{get:function(){return this.$store.state[this.moduleName].cols},set:function(e){this.$store.commit("".concat(this.moduleName,"/updateCols"),e)}},filter:{get:function(){return this.$store.state[this.moduleName].filter},set:function(e){e?this.$store.commit("".concat(this.moduleName,"/setFilter"),e):this.$store.commit("".concat(this.moduleName,"/setFilter"),"")}},begin:{get:function(){return this.$store.state[this.moduleName].begin},set:function(e){e?this.$store.commit("".concat(this.moduleName,"/setBegin"),e):this.$store.commit("".concat(this.moduleName,"/setBegin"),0)}},end:{get:function(){return this.$store.state[this.moduleName].end},set:function(e){e?this.$store.commit("".concat(this.moduleName,"/setEnd"),e):this.$store.commit("".concat(this.moduleName,"/setEnd"),0)}},reverse:{get:function(){return this.$store.state[this.moduleName].reverse||!1},set:function(e){this.$store.commit("".concat(this.moduleName,"/setReverse"),e)}},currentLimit:{get:function(){return this.$store.state[this.moduleName].limit},set:function(e){e?this.$store.commit("".concat(this.moduleName,"/setLimit"),e):this.$store.commit("".concat(this.moduleName,"/setLimit"),0)}},selected:{get:function(){return this.$store.state[this.moduleName].selected},set:function(e){this.$store.commit("".concat(this.moduleName,"/setSelected"),e)}}},methods:{resetParams:function(){this.$refs.scrollList.resetParams()},filterChangeHandler:function(e){this.filter!==e&&(this.filter=e,this.$store.commit("".concat(this.moduleName,"/clearMessages")),this.$store.dispatch("".concat(this.moduleName,"/get")))},setTranslate:function(e){this.i18n.from=e.length?"Previous batch until ".concat(f["d"].formatDate(1e3*e[0].timestamp,"HH:mm:ss")):"Prev",this.i18n.to=e.length?"Next batch from ".concat(f["d"].formatDate(1e3*e[e.length-1].timestamp,"HH:mm:ss")):"Next"},updateColsHandler:function(e){this.cols=e},dateRangeChangeHandler:function(e){var t=e[0],i=e[1];if(this.begin===t&&this.end===i)return!1;this.begin=t,this.end=i,this.$store.commit("".concat(this.moduleName,"/clearMessages")),this.$store.dispatch("".concat(this.moduleName,"/get"))},actionHandler:function(e){var t=e.index,i=e.type,s=e.content;switch(i){case"view":this.viewMessagesHandler({index:t,content:s});break;case"copy":this.copyMessageHandler({index:t,content:s});break}},viewMessagesHandler:function(e){var t=e.index,i=e.content;this.selected=[t],this.$emit("view-data",i)},copyMessageHandler:function(e){var t=this,i=(e.index,e.content);this.$copyText(JSON.stringify(i)).then(function(e){t.$q.notify({type:"positive",icon:"content_copy",message:"Message copied",timeout:1e3})},function(e){t.$q.notify({type:"negative",icon:"content_copy",message:"Error coping messages",timeout:1e3})})},unselect:function(){this.selected.length&&(this.selected=[])}},watch:{activeId:function(e){this.active=e},activeDeviceId:function(e){this.activeDevice=e},limit:function(e){this.currentLimit=e}},created:function(){var e=this;this.$store.state[this.moduleName]?this.$store.commit("".concat(this.moduleName,"/clear")):this.$store.registerModule(this.moduleName,Object(u["d"])({Vue:h["default"],LocalStorage:this.$q.localStorage,name:this.moduleName,errorHandler:function(t){e.$store.commit("reqFailed",t)},filterHandler:this.filterMessages})),this.currentLimit=this.limit,this.activeId&&(this.$store.commit("".concat(this.moduleName,"/setActive"),this.activeId),this.$store.commit("".concat(this.moduleName,"/setCols"),this.item.counters)),this.activeDeviceId&&this.$store.commit("".concat(this.moduleName,"/setActiveDevice"),this.activeDeviceId),this.$store.dispatch("".concat(this.moduleName,"/initTime")).then(function(){e.$store.dispatch("".concat(e.moduleName,"/get")),e.$store.dispatch("".concat(e.moduleName,"/pollingGet"))}),h["default"].connector.socket.on("offline",function(){e.$store.commit("".concat(e.moduleName,"/setOffline"),1===e.mode),e.$store.commit("setSocketOffline",!0)}),h["default"].connector.socket.on("connect",function(){e.$store.state[e.moduleName].offline&&(e.$store.commit("".concat(e.moduleName,"/setReconnected"),1===e.mode),e.$store.commit("setSocketOffline",!1))})},beforeDestroy:function(){h["default"].connector.socket.off("offline"),h["default"].connector.socket.off("connect"),this.$store.commit("".concat(this.moduleName,"/clear"))},mixins:[v["a"]],components:{VirtualScrollList:u["a"],MessagesListItem:C}},I=k,D=Object(w["a"])(I,l,r,!1,null,null,null);D.options.__file="Index.vue";var S=D.exports,M=i("2f62"),H=i("95ff"),O=i.n(H),z={props:["limit","isLoading","isVisibleToolbar","isNeedSelect","config"],data:function(){return{filter:"",deviceFilter:"",mode:1,active:null,activeDeviceId:null,ratio:50,isInit:!1}},computed:n()({},Object(M["d"])({newMessagesCount:function(e){var t=this.config.messages&&e[this.config.messages.vuexModuleName]?e[this.config.messages.vuexModuleName].newMessagesCount:0,i=this.config.logs&&e[this.config.logs.vuexModuleName]?e[this.config.logs.vuexModuleName].newMessagesCount:0;return t+i},isEmptyMessages:function(e){var t=this.config.messages&&e[this.config.messages.vuexModuleName]&&!e[this.config.messages.vuexModuleName].messages.length&&100!==this.ratio,i=this.config.logs&&e[this.config.logs.vuexModuleName]&&e[this.config.logs.vuexModuleName].messages&&!e[this.config.logs.vuexModuleName].messages.length&&0!==this.ratio;return t&&i},tokenType:function(e){return e.tokenInfo.access?e.tokenInfo.access.type:-1},items:function(e){var t=e.items,i=t.map(function(e){return e.id});return this.isInit&&this.acitve&&!i.includes(this.acitve)&&this.clearActive(),t},devices:function(e){var t=e["addition.devices"]||[],i=t.map(function(e){return e.id});return this.isInit&&this.activeDeviceId&&!i.includes(this.activeDeviceId)&&this.clearActiveDevice(),t},tasks:function(e){return e["addition.tasks"]||[]}}),{filteredItems:function(){var e=this,t=this.items;return this.activeDeviceId&&(t=t.filter(function(t){return e.tasks.some(function(i){return e.activeDeviceId===i.device_id&&t.id===i.calc_id})})),this.filterItems(t,this.filter.toLowerCase())},filteredDevices:function(){var e=this,t=this.devices;return this.active&&(t=t.filter(function(t){return e.tasks.some(function(i){return e.active===i.calc_id&&t.id===i.device_id})})),this.filterItems(t,this.deviceFilter.toLowerCase())},size:function(){return[this.ratio,100-this.ratio]},selectedItem:function(){var e=this,t=this.items.filter(function(t){return t.id===e.active})[0]||{};return t},selectedDevice:function(){var e=this;return this.devices.filter(function(t){return t.id===e.activeDeviceId})[0]||{}},modeModel:{get:function(){return!!this.mode},set:function(e){var t=Date.now();this.date=e?0:t-t%864e5,this.mode=Number(e),this.$emit("view-data-hide")}}}),methods:{filterItems:function(e,t){var i=t?e.filter(function(e){return e&&"undefined"!==typeof e.name&&null!==e.name&&e.name.toLowerCase().indexOf(t)>=0||e&&"undefined"!==typeof e.id&&null!==e.id&&(e.id+"").indexOf(t)>=0}):e;return i.sort(function(e,t){if(!e.name)return-1;if(!t.name)return 1;var i=e.name.toLowerCase(),s=t.name.toLowerCase();return i<s?-1:1}),i},viewDataHandler:function(e){this.$emit("view-data",e)},viewLogMessagesHandler:function(e){this.$emit("view-log-message",e)},unselect:function(){this.$refs.messages.unselect()},clearHandler:function(){var e=this;this.$q.dialog({title:"Confirm",message:"Do you really want to clear all data from the panes?",ok:!0,cancel:!0}).then(function(){e.$store.commit("".concat(e.config.messages.vuexModuleName,"/clearMessages")),e.$store.commit("".concat(e.config.logs.vuexModuleName,"/clearMessages"))}).catch(function(){})},clearActive:function(){this.active=null},clearActiveDevice:function(){this.activeDeviceId=null},init:function(){var e="calcs",t=this.$q.localStorage.get.item(e),i=this.$q.localStorage.get.item("calcsDeviceId"),s=this.$route.params&&this.$route.params.id?this.$route.params.id:null,a=this.$route.params&&this.$route.params.deviceId?this.$route.params.deviceId:null;if(this.isInit=!0,s){s=s.split("-");var c=2===s.length;a=a||s[1],s=s[0],this.items.filter(function(e){return e.id===Number(s)}).length?(this.active=Number(s),a&&this.devices.filter(function(e){return e.id===Number(a)}).length&&(this.activeDeviceId=Number(a),c&&this.$router.push("/calcs/".concat(s,"/device/").concat(a)))):this.active=null}else t&&this.items.filter(function(e){return e.id===t}).length&&(this.active=t,i&&this.devices.filter(function(e){return e.id===i}).length&&(this.activeDeviceId=Number(i)))}},watch:{ratio:function(e){var t=this;this.$nextTick(function(){+t.size[0]&&t.active&&(t.$refs.logs.resetParams(),t.$emit("view-data-hide")),+t.size[1]&&t.active&&t.$refs.messages.resetParams()})},$route:function(e){if(e.params&&e.params.id&&Number(e.params.id)===this.active&&e.params.deviceId&&this.activeDeviceId===Number(e.params.deviceId))return!1;e.params&&e.params.id?this.items.filter(function(t){return t.id===Number(e.params.id)}).length?(this.active=Number(e.params.id),e.params.deviceId&&(this.activeDeviceId=Number(e.params.deviceId))):this.isInit&&(this.active=null):e.params&&!e.params.id&&(this.active=null)},active:function(e){e&&this.activeDeviceId?(this.$q.localStorage.set("calcs",e),this.$router.push("/calcs/".concat(e,"/device/").concat(this.activeDeviceId))):e&&!this.activeDeviceId?(this.$q.localStorage.set("calcs",e),this.$router.push("/calcs/".concat(e))):this.$router.push("/calcs")},activeDeviceId:function(e){e&&this.active?(this.$q.localStorage.set("calcsDeviceId",e),this.$router.push("/calcs/".concat(this.active,"/device/").concat(e))):!e&&this.active?this.$router.push("/calcs/".concat(this.active)):this.$router.push("/calcs")}},components:{logs:o["a"],messages:S,VirtualList:O.a}},L=z,E=(i("8e5e"),Object(w["a"])(L,s,a,!1,null,null,null));E.options.__file="Calcs.vue";t["default"]=E.exports},e439:function(e,t,i){"use strict";var s=i("f7e4"),a=i.n(s);a.a},f7e4:function(e,t,i){}}]);